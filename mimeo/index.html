<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Vishal Koparde, Ph.D."><link href=../catalog/ rel=prev><link href=../grubbers/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.6"><title>mimeo - spacesavers2</title><link rel=stylesheet href=../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#spacesavers2_mimeo class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=spacesavers2 class="md-header__button md-logo" aria-label=spacesavers2 data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> spacesavers2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> mimeo </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/CCBR/spacesavers2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> CCBR/spacesavers2 </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Background </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../catalog/ class=md-tabs__link> Usage </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=spacesavers2 class="md-nav__button md-logo" aria-label=spacesavers2 data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> spacesavers2 </label> <div class=md-nav__source> <a href=https://github.com/CCBR/spacesavers2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> CCBR/spacesavers2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Background </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../catalog/ class=md-nav__link> <span class=md-ellipsis> catalog </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> mimeo </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> mimeo </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#spacesavers2_mimeo class=md-nav__link> <span class=md-ellipsis> spacesavers2_mimeo </span> </a> <nav class=md-nav aria-label=spacesavers2_mimeo> <ul class=md-nav__list> <li class=md-nav__item> <a href=#inputs class=md-nav__link> <span class=md-ellipsis> Inputs </span> </a> </li> <li class=md-nav__item> <a href=#outputs class=md-nav__link> <span class=md-ellipsis> Outputs </span> </a> <nav class=md-nav aria-label=Outputs> <ul class=md-nav__list> <li class=md-nav__item> <a href=#duplicates class=md-nav__link> <span class=md-ellipsis> Duplicates </span> </a> </li> <li class=md-nav__item> <a href=#summaries class=md-nav__link> <span class=md-ellipsis> Summaries </span> </a> </li> <li class=md-nav__item> <a href=#kronatsv-and-kronahtml class=md-nav__link> <span class=md-ellipsis> KronaTSV and KronaHTML </span> </a> </li> <li class=md-nav__item> <a href=#blamematrix class=md-nav__link> <span class=md-ellipsis> Blamematrix </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../grubbers/ class=md-nav__link> <span class=md-ellipsis> grubbers </span> </a> </li> <li class=md-nav__item> <a href=../usurp/ class=md-nav__link> <span class=md-ellipsis> usurp </span> </a> </li> <li class=md-nav__item> <a href=../e2e/ class=md-nav__link> <span class=md-ellipsis> e2e </span> </a> </li> <li class=md-nav__item> <a href=../pdq/ class=md-nav__link> <span class=md-ellipsis> pdq </span> </a> </li> <li class=md-nav__item> <a href=../pdq_create_db/ class=md-nav__link> <span class=md-ellipsis> pdq_create_db </span> </a> </li> <li class=md-nav__item> <a href=../pdq_update_db/ class=md-nav__link> <span class=md-ellipsis> pdq_update_db </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>mimeo</h1> <h2 id=spacesavers2_mimeo>spacesavers2_mimeo<a class=headerlink href=#spacesavers2_mimeo title="Permanent link">&para;</a></h2> <p>This takes in the <code>catalog</code> file generated by <code>spacesavers2_catalog</code> and processes it to:</p> <ul> <li>find duplicates</li> <li>create per-user summary reports for each user (and all users).</li> </ul> <h3 id=inputs>Inputs<a class=headerlink href=#inputs title="Permanent link">&para;</a></h3> <ul> <li><code>--catalog</code> is the output file from <code>spacesavers2_catalog</code>. Thus, <code>spacesavers2_catalog</code> needs to be run before running <code>spacesavers2_mimeo</code>.</li> <li><code>--maxdepth</code> maximum folder depth upto which reports are aggregated</li> <li><code>--outdir</code> path to the output folder</li> <li><code>--prefix</code> prefix to be added to the output file names eg. date etc.</li> <li><code>--duplicatesonly</code> only report duplicates in the <code>.files.gz</code> output files. This saves a lot of disc space. (Highly recommended!)</li> <li><code>--quota</code> defines the size of the overall file mount. (eg. 200 TB for <code>/data/CCBR</code> on BIOWULF.) OccScore is dependent on this and should be provided appropriately for accurate results.</li> </ul> <div class=highlight><pre><span></span><code>%<span class=w> </span>spacesavers2_mimeo<span class=w> </span>--help
usage:<span class=w> </span>spacesavers2_mimeo<span class=w> </span><span class=o>[</span>-h<span class=o>]</span><span class=w> </span>-f<span class=w> </span>CATALOG<span class=w> </span><span class=o>[</span>-d<span class=w> </span>MAXDEPTH<span class=o>]</span><span class=w> </span><span class=o>[</span>-o<span class=w> </span>OUTDIR<span class=o>]</span><span class=w> </span><span class=o>[</span>-p<span class=w> </span>PREFIX<span class=o>]</span><span class=w> </span><span class=o>[</span>-q<span class=w> </span>QUOTA<span class=o>]</span><span class=w> </span><span class=o>[</span>-z<span class=w> </span><span class=p>|</span><span class=w> </span>--duplicatesonly<span class=w> </span><span class=p>|</span><span class=w> </span>--no-duplicatesonly<span class=o>]</span><span class=w> </span><span class=o>[</span>-k<span class=w> </span><span class=p>|</span><span class=w> </span>--kronaplot<span class=w> </span><span class=p>|</span><span class=w> </span>--no-kronaplot<span class=o>]</span><span class=w> </span><span class=o>[</span>-v<span class=o>]</span>

spacesavers2_mimeo:<span class=w> </span>find<span class=w> </span>duplicates

options:
<span class=w>  </span>-h,<span class=w> </span>--help<span class=w>            </span>show<span class=w> </span>this<span class=w> </span><span class=nb>help</span><span class=w> </span>message<span class=w> </span>and<span class=w> </span><span class=nb>exit</span>
<span class=w>  </span>-f<span class=w> </span>CATALOG,<span class=w> </span>--catalog<span class=w> </span>CATALOG
<span class=w>                        </span>spacesavers2_catalog<span class=w> </span>output<span class=w> </span>from<span class=w> </span>STDIN<span class=w> </span>or<span class=w> </span>from<span class=w> </span>catalog<span class=w> </span>file
<span class=w>  </span>-d<span class=w> </span>MAXDEPTH,<span class=w> </span>--maxdepth<span class=w> </span>MAXDEPTH
<span class=w>                        </span>folder<span class=w> </span>max.<span class=w> </span>depth<span class=w> </span>upto<span class=w> </span>which<span class=w> </span>reports<span class=w> </span>are<span class=w> </span>aggregated<span class=w> </span>...<span class=w> </span>absolute<span class=w> </span>path<span class=w> </span>is<span class=w> </span>used<span class=w> </span>to<span class=w> </span>calculate<span class=w> </span>depth<span class=w> </span><span class=o>(</span>Default:<span class=w> </span><span class=m>10</span><span class=o>)</span>
<span class=w>  </span>-o<span class=w> </span>OUTDIR,<span class=w> </span>--outdir<span class=w> </span>OUTDIR
<span class=w>                        </span>output<span class=w> </span>folder
<span class=w>  </span>-p<span class=w> </span>PREFIX,<span class=w> </span>--prefix<span class=w> </span>PREFIX
<span class=w>                        </span>prefix<span class=w> </span><span class=k>for</span><span class=w> </span>all<span class=w> </span>output<span class=w> </span>files
<span class=w>  </span>-q<span class=w> </span>QUOTA,<span class=w> </span>--quota<span class=w> </span>QUOTA
<span class=w>                        </span>total<span class=w> </span>quota<span class=w> </span>of<span class=w> </span>the<span class=w> </span>mount<span class=w> </span>eg.<span class=w> </span><span class=m>200</span><span class=w> </span>TB<span class=w> </span><span class=k>for</span><span class=w> </span>/data/CCBR
<span class=w>  </span>-z,<span class=w> </span>--duplicatesonly,<span class=w> </span>--no-duplicatesonly
<span class=w>                        </span>Print<span class=w> </span>only<span class=w> </span>duplicates<span class=w> </span>to<span class=w> </span>per<span class=w> </span>user<span class=w> </span>output<span class=w> </span>file.
<span class=w>  </span>-k,<span class=w> </span>--kronaplot,<span class=w> </span>--no-kronaplot
<span class=w>                        </span>Make<span class=w> </span>kronaplots<span class=w> </span><span class=k>for</span><span class=w> </span>duplicates.<span class=o>(</span>ktImportText<span class=w> </span>must<span class=w> </span>be<span class=w> </span><span class=k>in</span><span class=w> </span>PATH!<span class=o>)</span>
<span class=w>  </span>-v,<span class=w> </span>--version<span class=w>         </span>show<span class=w> </span>program<span class=err>&#39;</span>s<span class=w> </span>version<span class=w> </span>number<span class=w> </span>and<span class=w> </span><span class=nb>exit</span>

Version:
<span class=w>    </span>v0.10.2-dev
Example:
<span class=w>    </span>&gt;<span class=w> </span>spacesavers2_mimeo<span class=w> </span>-f<span class=w> </span>/output/from/spacesavers2_catalog<span class=w> </span>-o<span class=w> </span>/path/to/output/folder<span class=w> </span>-d<span class=w> </span><span class=m>7</span><span class=w> </span>-q<span class=w> </span><span class=m>10</span><span class=w> </span>-k
</code></pre></div> <h3 id=outputs>Outputs<a class=headerlink href=#outputs title="Permanent link">&para;</a></h3> <p>After completion of run, <code>spacesavers2_mimeo</code> creates <code>*.mimeo.files.gz</code> (list of files per user + one "allusers" file) and <code>.summary.txt</code> (overall stats at various depths) files in the provided output folder. if <code>-k</code> is provided (and ktImportText from <a href=https://github.com/marbl/Krona/wiki/KronaTools>kronatools</a> is in PATH) then krona specific TSV and HTML pages are also generated. It also generates a <code>blamematrix.tsv</code> file with folders on rows and users on columns with duplicate bytes per-folder-per-user. This file can be used to create a "heatmap" to pinpoint folder with highest duplicates overall as well as on a per-user basis.</p> <p>Here are the details:</p> <h4 id=duplicates>Duplicates<a class=headerlink href=#duplicates title="Permanent link">&para;</a></h4> <p><code>spacesavers2_mimeo</code> uses the following logic to find duplicates:</p> <ul> <li>Bin files by their top (and bottom) xxHashes irrespective of user id (allusers mode)</li> <li>Check if each bin has unique sized files. If a bin has more than 1 size, then it needs to be binned further. Sometimes, xxHash of top and bottom chunks also gives the same combination of hash for differing files. These files will have different sizes. Hence, re-bin them accordingly.</li> <li>If same size, then check inodes. If all files in the same bin have the same inode, then these are just hard-links. But, if there are multiple inodes, then we have <strong>duplicates</strong>!</li> <li>If we have duplicates, then <code>spacesavers2_mimeo</code> keeps track of number of duplicates per bin. Number of duplicates is equal to number of inodes in each bin minus one.</li> <li>If we have duplicates, then the oldest file is identified and considered to be the original file. All other files are marked <em>duplicate</em>, irrespective of user id.</li> <li>duplicate files are reported in gzip format with the following columns for all users and per-user basis</li> </ul> <p>Here is what the <code>.files.gz</code> file columns (space-separated) represent:</p> <table> <thead> <tr> <th>Column</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>top chunk and bottom chunk hashes separated by "#"</td> </tr> <tr> <td>2</td> <td>separator ":"</td> </tr> <tr> <td>3</td> <td>Number of duplicates files (not duplicate inodes)</td> </tr> <tr> <td>4</td> <td>Size of each file</td> </tr> <tr> <td>5</td> <td>List of users duplicates serapated by "##"</td> </tr> </tbody> </table> <blockquote> <p>NOTE: Number of dupicate files can be greater than number of duplicate inodes as each file can have multiple hard links already. Hence, while calculating total duplicate bytes we use (total_number_of_unique_inodes_per_group_of_duplicate_files - 1) X size_of_each_file. The "minus 1" is to not count the size of the original file.</p> </blockquote> <p>Each file in the last column above is ";" separated with the same 13 items as described in the <code>catalog</code> file. The only difference is that the username and groupame are now appended to each file entry.</p> <p>Along with creating one <code>.mimeo.files.gz</code> and <code>.mimeo.summary.txt</code> file per user encountered, <code>spacesavers2_mimeo</code> also generates a <code>allusers.mimeo.files.gz</code> file for all users combined. This file is later used by <code>spacesavers2_blamematrix</code> as input.</p> <h4 id=summaries>Summaries<a class=headerlink href=#summaries title="Permanent link">&para;</a></h4> <p>Summaries, files ending with <code>.mimeo.summary.txt</code> are collected and reported for all users (<code>allusers.mimeo.summary.txt</code>) and per-user (<code>USERNAME.mimeo.summary.txt</code>) basis for user-defined depth (and beyond). The columns (tab-delimited) in the summary file:</p> <table> <thead> <tr> <th>Column</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>absolute path</td> </tr> <tr> <td>2</td> <td>total bytes</td> </tr> <tr> <td>3</td> <td>duplicate bytes</td> </tr> <tr> <td>4</td> <td>percent duplicate bytes</td> </tr> <tr> <td>5</td> <td>total files</td> </tr> <tr> <td>6</td> <td>duplicate files</td> </tr> <tr> <td>7</td> <td>percent duplicate files</td> </tr> <tr> <td>8</td> <td>average file age of all files (days)</td> </tr> <tr> <td>9</td> <td>average file age of duplicates (days)</td> </tr> <tr> <td>10</td> <td>AgeScore</td> </tr> <tr> <td>11</td> <td>DupScore</td> </tr> <tr> <td>12</td> <td>OccScore</td> </tr> <tr> <td>13</td> <td>OverallScore</td> </tr> </tbody> </table> <p>For columns 10 through 13, the same logic is used as <a href=https://ccbr.github.io/spacesavers/usage/df/ >spacesavers</a>.</p> <h4 id=kronatsv-and-kronahtml>KronaTSV and KronaHTML<a class=headerlink href=#kronatsv-and-kronahtml title="Permanent link">&para;</a></h4> <ul> <li>KronaTSV is tab-delimited with first column showing the number of duplicate bytes and every subsequent column giving the folder depths.</li> <li>ktImportText is then used to convert the KronaTSV to KronaHTML which can be shared easily and only needs a HTML5 supporting browser for viewing.</li> </ul> <h4 id=blamematrix>Blamematrix<a class=headerlink href=#blamematrix title="Permanent link">&para;</a></h4> <ul> <li>rows are folders as 1 level deeper than the "mindepth"</li> <li>columns are all individual usernames, plus an "allusers" column</li> <li>only duplicate-bytes are reported</li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> 2024-05-12 </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 CCBR </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=http://bioinformatics.cancer.gov target=_blank rel=noopener title=bioinformatics.cancer.gov class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M144 0a80 80 0 1 1 0 160 80 80 0 1 1 0-160zm368 0a80 80 0 1 1 0 160 80 80 0 1 1 0-160zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7-1.3 7.2-1.9 14.7-1.9 22.3 0 38.2 16.8 72.5 43.3 96H21.3C9.6 320 0 310.4 0 298.7zM405.3 320h-.7c26.6-23.5 43.3-57.8 43.3-96 0-7.6-.7-15-1.9-22.3 13.6-6.3 28.7-9.7 44.6-9.7h42.7c58.9 0 106.7 47.8 106.7 106.7 0 11.8-9.6 21.3-21.3 21.3H405.3zM224 224a96 96 0 1 1 192 0 96 96 0 1 1-192 0zm-96 261.3c0-73.6 59.7-133.3 133.3-133.3h117.4c73.6 0 133.3 59.7 133.3 133.3 0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"/></svg> </a> <a href=https://github.com/CCBR target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://hub.docker.com/orgs/nciccbr/repositories target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../assets/javascripts/bundle.e1c3ead8.min.js></script> </body> </html>